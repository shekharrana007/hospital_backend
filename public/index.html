<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPD Token Allocation Engine</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üè• OPD Token Allocation Engine</h1>
            <nav>
                <button class="nav-btn active" data-page="dashboard">Dashboard</button>
                <button class="nav-btn" data-page="doctors">Doctors</button>
                <button class="nav-btn" data-page="allocate">Allocate Token</button>
                <button class="nav-btn" data-page="schedule">Schedule</button>
                <button class="nav-btn" data-page="simulate">Simulate</button>
            </nav>
        </header>

        <main>
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <h2>Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Doctors</h3>
                        <p id="total-doctors">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Tokens</h3>
                        <p id="total-tokens">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Today's Date</h3>
                        <p id="today-date"></p>
                    </div>
                </div>
                <div class="quick-actions">
                    <h3>Quick Actions</h3>
                    <button class="btn btn-primary" onclick="showPage('allocate')">Allocate New Token</button>
                    <button class="btn btn-secondary" onclick="showPage('doctors')">Manage Doctors</button>
                    <button class="btn btn-info" onclick="showPage('schedule')">View Schedule</button>
                    <button class="btn btn-success" onclick="showPage('simulate')">Run Simulation</button>
                </div>
            </div>

            <!-- Doctors Page -->
            <div id="doctors-page" class="page">
                <h2>Doctor Management</h2>
                <div class="form-section">
                    <h3>Add New Doctor</h3>
                    <form id="doctor-form" class="form">
                        <div class="form-group">
                            <label>Doctor Name</label>
                            <input type="text" id="doctor-name" required placeholder="e.g., Dr. John Smith">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Start Time</label>
                                <input type="time" id="doctor-start-time" required value="09:00">
                            </div>
                            <div class="form-group">
                                <label>End Time</label>
                                <input type="time" id="doctor-end-time" required value="17:00">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Slot Duration (minutes)</label>
                                <input type="number" id="doctor-slot-duration" required min="5" value="15">
                            </div>
                            <div class="form-group">
                                <label>Max Patients per Slot</label>
                                <input type="number" id="doctor-max-patients" required min="1" value="4">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Doctor</button>
                    </form>
                </div>
                <div class="list-section">
                    <h3>Registered Doctors</h3>
                    <div id="doctors-list" class="doctors-grid"></div>
                </div>
            </div>

            <!-- Allocate Token Page -->
            <div id="allocate-page" class="page">
                <h2>Allocate Token</h2>
                <form id="token-form" class="form">
                    <div class="form-group">
                        <label>Select Doctor</label>
                        <select id="token-doctor" required>
                            <option value="">Loading doctors...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" id="token-date" required>
                    </div>
                    <div class="form-group">
                        <label>Patient Name</label>
                        <input type="text" id="token-patient-name" required placeholder="Enter patient name">
                    </div>
                    <div class="form-group">
                        <label>Source</label>
                        <select id="token-source" required>
                            <option value="ONLINE">Online</option>
                            <option value="WALK_IN">Walk-in</option>
                            <option value="PAID">Paid</option>
                            <option value="FOLLOW_UP">Follow-up</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="token-emergency"> Emergency Case
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary">Allocate Token</button>
                </form>
                <div id="token-result" class="result-box"></div>
            </div>

            <!-- Schedule Page -->
            <div id="schedule-page" class="page">
                <h2>View Schedule</h2>
                <div class="form-section">
                    <form id="schedule-form" class="form">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Select Doctor</label>
                                <select id="schedule-doctor" required>
                                    <option value="">Loading doctors...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Date</label>
                                <input type="date" id="schedule-date" required>
                            </div>
                            <button type="submit" class="btn btn-primary">View Schedule</button>
                        </div>
                    </form>
                </div>
                <div id="schedule-result" class="schedule-container"></div>
            </div>

            <!-- Simulate Page -->
            <div id="simulate-page" class="page">
                <h2>Run Simulation</h2>
                <div class="info-box">
                    <p>This will create 3 sample doctors and simulate a full OPD day with mixed bookings, cancellations, no-shows, and emergency insertions.</p>
                    <p><strong>Warning:</strong> This will reset all existing data!</p>
                </div>
                <form id="simulate-form" class="form">
                    <div class="form-group">
                        <label>Date for Simulation</label>
                        <input type="date" id="simulate-date" required>
                    </div>
                    <button type="submit" class="btn btn-success">Run Simulation</button>
                </form>
                <div id="simulate-result" class="result-box"></div>
            </div>
        </main>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>
